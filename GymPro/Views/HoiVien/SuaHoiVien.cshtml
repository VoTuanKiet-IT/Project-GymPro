@model GymPro.Models.HoiVienTableRow

@{
    ViewBag.Title = "Sửa Hội Viên";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="edit-container">
    <h2 class="page-title">✏️ Sửa thông tin hội viên</h2>

    @using (Html.BeginForm("SuaHoiVien", "HoiVien", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()

        <div class="form-card">
            <h4 class="form-section-title">Thông tin cá nhân</h4>
            <hr class="divider" />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.hoiviens.hoivien_ma)

            <div class="form-group">
                @Html.LabelFor(model => model.hoiviens.hoivien_hodem)
                @Html.EditorFor(model => model.hoiviens.hoivien_hodem, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.hoiviens.hoivien_hodem, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.hoiviens.hoivien_ten)
                @Html.EditorFor(model => model.hoiviens.hoivien_ten, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.hoiviens.hoivien_ten, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.hoiviens.hoivien_email)
                @Html.EditorFor(model => model.hoiviens.hoivien_email, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.hoiviens.hoivien_email, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.hoiviens.hoivien_dienthoai)
                @Html.EditorFor(model => model.hoiviens.hoivien_dienthoai, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.hoiviens.hoivien_dienthoai, "", new { @class = "text-danger" })
            </div>

            <div class="form-group gender-group">
                <label>Giới tính</label>
                <div class="gender-options">
                    <label class="radio-label">
                        @Html.RadioButtonFor(model => model.hoiviens.hoivien_gioitinh, true) Nam
                    </label>
                    <label class="radio-label">
                        @Html.RadioButtonFor(model => model.hoiviens.hoivien_gioitinh, false) Nữ
                    </label>
                </div>
                @Html.ValidationMessageFor(model => model.hoiviens.hoivien_gioitinh, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.ngaysinh)
                @Html.EditorFor(model => model.ngaysinh, new { htmlAttributes = new { @class = "form-control", type = "date" } })
                @Html.ValidationMessageFor(model => model.ngaysinh, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.hoiviens.hoivien_diachi)
                @Html.EditorFor(model => model.hoiviens.hoivien_diachi, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.hoiviens.hoivien_diachi, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.hoivien_anhdaidien_file, "Ảnh đại diện")
                <input type="file" name="hoivien_anhdaidien_file" id="hoivien_anhdaidien_file" class="form-control-file" />
                <div class="image-preview-container">
                    @if (!string.IsNullOrEmpty(Model.hoiviens.hoivien_hinhanh))
                    {
                        <img id="imagePreview" src="@Url.Content(Model.hoiviens.hoivien_hinhanh)" alt="Ảnh đại diện" />
                    }
                    else
                    {
                        <img id="imagePreview" src="#" alt="Ảnh đại diện" style="display:none;" />
                    }
                </div>
                @Html.ValidationMessageFor(model => model.hoivien_anhdaidien_file, "", new { @class = "text-danger" })
            </div>

            @Html.HiddenFor(model => model.ngaydangky)

            <div class="form-group submit-group">
                <input type="submit" value="💾 Lưu thay đổi" class="btn-submit" />
                @Html.ActionLink("⬅ Quay lại danh sách", "HoiVienListView", null, new { @class = "btn-back" })
            </div>
        </div>
    }
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {
            $("#hoivien_anhdaidien_file").change(function () {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $("#imagePreview").attr('src', e.target.result).show();
                    }
                    reader.readAsDataURL(this.files[0]);
                } else {
                    $("#imagePreview").hide();
                }
            });
        });
    </script>
}

<style>
    body {
        background-color: #161616;
        color: #EDECFF;
        font-family: 'Poppins', sans-serif;
    }

    .edit-container {
        max-width: 900px;
        margin: 40px auto;
        padding: 25px;
        background-color: #012E25;
        border-radius: 14px;
        box-shadow: 0 0 25px rgba(101, 199, 28, 0.2);
    }

    .page-title {
        text-align: center;
        color: #AEE710;
        font-weight: 600;
        font-size: 2rem;
        margin-bottom: 30px;
    }

    .form-card {
        background-color: #161616;
        padding: 25px;
        border-radius: 10px;
    }

    .form-section-title {
        color: #65C71C;
        font-weight: 500;
    }

    .divider {
        border: none;
        border-bottom: 2px solid #0BA08B;
        margin: 15px 0 25px;
    }

    .form-group {
        margin-bottom: 18px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        color: #AEE710;
        font-weight: 500;
    }

    .form-control, .form-control-file {
        width: 100%;
        background-color: #012E25;
        border: 1px solid #0BA08B;
        color: #EDECFF;
        border-radius: 6px;
        padding: 10px;
    }

    .form-control:focus {
        border-color: #65C71C;
        outline: none;
        box-shadow: 0 0 5px rgba(101, 199, 28, 0.3);
    }

    .gender-group .gender-options {
        display: flex;
        gap: 20px;
        margin-top: 5px;
    }

    .radio-label {
        color: #EDECFF;
    }

    .image-preview-container {
        margin-top: 10px;
    }

    #imagePreview {
        width: 120px;
        height: 120px;
        border-radius: 10px;
        border: 2px solid #65C71C;
        object-fit: cover;
        display: block;
    }

    .btn-submit {
        background-color: #65C71C;
        color: #161616;
        font-weight: 600;
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        transition: 0.3s;
    }

    .btn-submit:hover {
        background-color: #AEE710;
    }

    .btn-back {
        margin-left: 15px;
        color: #EDECFF;
        background-color: #0BA08B;
        padding: 10px 18px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        transition: 0.3s;
    }

    .btn-back:hover {
        background-color: #65C71C;
        color: #161616;
    }

    @@media (max-width: 768px) {
        .edit-container {
            padding: 15px;
        }
        .btn-submit, .btn-back {
            width: 100%;
            display: block;
            margin-bottom: 10px;
            text-align: center;
        }
    }
</style>
